{% extends 'stay_underflow/base.html' %}

{% block title %}Stay Underflow{% endblock %}

{% block content %}
    <h1 style="display:inline-block">Preguntes principals</h1>

    <div style="display:inline-block; float: right">
        {% if user.is_authenticated %}
            <a class="btn btn-outline-dark" href="{% url 'new-post' %}">Nova pregunta</a>
        {% else %}
            <a class="btn btn-outline-dark" href="{% url 'register' %}">Nova pregunta</a>
        {% endif %}
    </div>


    <div class="tab">
      <button class="tablinks" onclick="openCity('All')">All</button>
      <button class="tablinks" onclick="openCity('Done')">Done</button>
      <button class="tablinks" onclick="openCity('Undone')">Undone</button>
    </div>

    <div id="All" class="tabcontent city" style="display: block">
    {% if posts %}
      {% for post in posts %}
            <div class="content">
                <div class="media">
                    <img class="rounded-circle" src="{{ post.author.perfil.image.url }}" width="80" height="80">
                    <div class="media-body" style="margin-left: 1%;">
                        <a href="{% url 'post-detail' post.id %}" style="color: black"><h1>{{ post.title }}</h1></a>
                        <p class="text-secondary">By <a href="{%url 'profile' post.author %}">{{ post.author }}</a> on {{ post.date_posted|date:"j F, Y"}} at {{ post.date_posted|date:"G:i" }}</p>
                        <p>{{ post.content }}</p>
                        {% if post.views >= 0 %}
                        <p class="like" style="width: 50%; float: right; margin-top: -30px;">
                            {% if post.views >= 10 and post.views < 25 %}
                                <i class="fas fa-medal" style="color: #CD7F32; margin-right: 5px"></i>
                            {% elif post.views >= 25 and post.views < 100 %}
                                <i class="fas fa-medal" style="color: #C0C0C0; margin-right: 5px"></i>
                            {% elif post.views >= 100 %}
                                <i class="fas fa-medal" style="color: #D4AF37; margin-right: 5px"></i>
                            {% endif %}
                        </p>
                        {% endif %}
                    </div>
                </div>

            </div>
        {% endfor %}
    {% else %}
        There are no posts.
    {% endif %}
    </div>

    <div id="Done" class="tabcontent city" style="display:none">
    {% if done %}
        {% for post in done %}
            <div class="content">
                <div class="media">
                    <img class="rounded-circle" src="{{ post.author.perfil.image.url }}" width="80" height="80">
                    <div class="media-body" style="margin-left: 1%;">
                        <a href="{% url 'post-detail' post.id %}" style="color: black"><h1>{{ post.title }}</h1></a>
                        <p class="text-secondary">By <a href="{%url 'profile' post.author %}">{{ post.author }}</a> on {{ post.date_posted|date:"j F, Y"}} at {{ post.date_posted|date:"G:i" }}</p>
                        <p>{{ post.content }}</p>
                        {% if post.views >= 0%}
                        <p class="like" style="width: 50%; float: right; margin-top: -30px;">
                            {% if post.views >= 10 and post.views < 25 %}
                                <i class="fas fa-medal" style="color: #CD7F32; margin-right: 5px"></i>
                            {% elif post.views >= 25 and post.views < 100 %}
                                <i class="fas fa-medal" style="color: #C0C0C0; margin-right: 5px"></i>
                            {% elif medalla >= 100 %}
                                <i class="fas fa-medal" style="color: #D4AF37; margin-right: 5px"></i>
                            {% endif %}
                        </p>
                        {% endif %}
                    </div>
                </div>

            </div>
        {% endfor %}
    {% else %}
        There are no done posts.
    {% endif %}
    </div>

    <div id="Undone" class="tabcontent city" style="display:none">
    {% if undone %}
        {% for post in undone %}
            <div class="content">
                <div class="media">
                    <img class="rounded-circle" src="{{ post.author.perfil.image.url }}" width="80" height="80">
                    <div class="media-body" style="margin-left: 1%;">
                        <a href="{% url 'post-detail' post.id %}" style="color: black"><h1>{{ post.title }}</h1></a>
                        <p class="text-secondary">By <a href="{%url 'profile' post.author %}">{{ post.author }}</a> on {{ post.date_posted|date:"j F, Y"}} at {{ post.date_posted|date:"G:i" }}</p>
                        <p>{{ post.content }}</p>
                        {% if post.views >= 0 %}
                        <p class="like" style="width: 50%; float: right; margin-top: -30px;">
                            {% if post.views >= 10 and post.views < 25 %}
                                <i class="fas fa-medal" style="color: #CD7F32; margin-right: 5px"></i>
                            {% elif post.views >= 25 and post.views < 100 %}
                                <i class="fas fa-medal" style="color: #C0C0C0; margin-right: 5px"></i>
                            {% elif medalla >= 100 %}
                                <i class="fas fa-medal" style="color: #D4AF37; margin-right: 5px"></i>
                            {% endif %}
                        </p>
                        {% endif %}
                    </div>
                </div>

            </div>
        {% endfor %}
    {% else %}
        There are no undone posts.
    {% endif %}
    </div>

    <script>
    function openCity(cityName) {
      var i;
      var x = document.getElementsByClassName("city");
      for (i = 0; i < x.length; i++) {
        x[i].style.display = "none";
      }
      document.getElementById(cityName).style.display = "block";
    }
    </script>


{% endblock %}